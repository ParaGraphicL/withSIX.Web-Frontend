<template>
  <div id="wrapper" class="${w6.url.site} ${w6.url.site == 'main' && w6.url.isRoot ? 'home' : null} ${w6.chromeless ? 'chromeless' : null} ${classes} ${w6.enableBasket ? 'basket' : ''}">
    <div id="content-view">
      <div class="preview-header" if.bind="w6.url.environment != 0">
        This is a preview page, please visit the production site at <a href="http://withsix.com">withSIX.com</a>
      </div>

      <div class="update-header" if.bind="showFirefoxNotice">
        We notice you are running FireFox. If you have issues connecting with the Sync client. Please allow a security exception by clicking <a target="_blank" href.bind="w6.client.endpoint">here</a> and following the instructions.
      </div>

      <div class="update-header" if.bind="newAppVersionAvailable">
        A new version of the site is available, please
        <button class="anchor" click.delegate="refresh()">refresh</button> to update
      </div>

      <a name="top"></a>

      <header id="header-row" css.bind="w6.headerImage">
        <div class="overlay">

          <section class="row-globalmenu" if.bind="!w6.chromeless">
            <div class="container-fluid">
              <div class="clearfix">
                <div class="logo">
                  <a href="${w6.url.main}/" class="${w6.url.selectedSite == 0 ? 'active' : null}">
                    <img src="${w6.versionedImage('logo/logo_solid_blue.svg')}" class="logo" alt="withSIX Home" />
                  </a>
                </div>

                <nav>
                  <ul class="menu main">
                    <li>
                      <a href="${w6.url.play}" class="${w6.url.selectedSite == 1 ? 'active' : null}">
                        <span class="menu-icon withSIX-icon-Joystick"></span> Play
                      </a>
                    </li>

                    <li>
                      <a href="/me" class="${w6.url.selectedSite == 2 ? 'active' : null}">
                        <span class="menu-icon withSIX-icon-Users-Group"></span> Connect
                      </a>
                    </li>

                    <li>
                      <a href="#" id="search-btn" click.delegate="openSearch($event)">
                        <span class="menu-icon withSIX-icon-Search"></span> Search
                      </a>
                    </li>

                  </ul>
                </nav>

                <div if.bind="isLoggedIn">
                  <!-- SignedIn -->
                  <div class="signedin pull-right">

                    <span class="welcome">

                  <a href="/me/settings/premium" if.bind="w6.userInfo.isPremium">
                    <span class="icon withSIX-icon-Badge-Sponsor premium" title="You are a premium user, congrats!"></span>
                    </a>

                    <dropdown-menu items.bind="userMenuItems">
                      <template replace-part="header">
                        <img src="${w6.userInfo.getAvatarUrl(48)}" alt="${w6.userInfo.displayName}" title.bind="w6.userInfo.displayName" />
                        <span class="icon withSIX-icon-Settings"></span>
                      </template>
                    </dropdown-menu>
                  </div>
                </div>

                <!--
                    User is not logedin, Show User Menu
                    -->
                <div class="usermenu" if.bind="!isLoggedIn">
                  <compose view="_user-menu.html"></compose>
                </div>

                <div class="header-buttons pull-right">
                  <a if.bind="!w6.isClient && !w6.miniClient.isConnected" href="${w6.url.main}/download" class="calltoaction clientdownload">
                    <span class="icon withSIX-icon-Download"></span> Get the
                    <strong>Client</strong>
                  </a>

                  <a href="/gopremium" class="calltoaction blue" if.bind="!w6.userInfo.isPremium">
                    <span class="icon withSIX-icon-Badge-Sponsor"></span> Go
                    <strong>Premium</strong>
                  </a>
                </div>
              </div>
            </div>
          </section>

          <ad-unit class="container-fluid header-add" unit-class="add-leaderboard" unit-id="angular-ad-leader" if.bind="!w6.url.isRoot && w6.renderAds"></ad-unit>

          <div class="container-fluid" if.bind="showSlogan">
            <compose view="./_slogan.html"></compose>
          </div>

          <!-- @RenderSection("header") -->
        </div>
      </header>

      <div>
        <section id="root-content-row" class="${w6.url.isRoot ? 'root' : null}">
          <router-view></router-view>
        </section>

        <section id="bottom-breadcrumbs-row" class="container-fluid">
          <div class="breadcrumbs">
            <a href="${w6.url.main}/" class="withSIX-icon-Home">&nbsp;</a>

            <span repeat.for="crumb of breadcrumbs">
          <span class="icon-double-angle-right"></span>

            <span if.bind="!crumb.path">${crumb.title}</span>
            <a if.bind="crumb.path" href="${crumb.path}">${crumb.title}</a>
            </span>
          </div>

          <div if.bind="w6.renderAds">
            <br/>
            <center>
              <ad-links height="15" width="728" slot="${w6.url.site == 'play' ? w6.ads.slots.play.hz_large : w6.ads.slots.main.hz_large}"></ad-links>
            </center>
          </div>
        </section>

        <footer id="footer-row">
          <compose view="./_footer.html"></compose>
        </footer>
      </div>
    </div>
  </div>
</template>
