<template>
  <div class="content-basketable content-stateable content-state-${itemStateClass} ${itemBusyClass} ${model.hasServers ? 'has-servers' : ''} ${isInBasket ? 'in-basket' : null} ${progressClass}">

    <div class="content-state-c-bgd-border">
      <conditional-title desired-title="${state.progress | progress} @ ${state.speed | speed:'B':false}" condition.bind="state && (state.progress || state.speed)">
        <div class="basket-content-progess-bar content-state-progress-width content-state-progress-c-bgd">&nbsp;</div>

        <div class="img">
          <action-bar class="pull-left basketable-action" items.bind="topActions"></action-bar>
          <dropdown-menu class="basketable-dropdown new-style hide-until-open" menu-cls="content-stateable content-state-${itemStateClass}" if.bind="topMenuActions && topMenuActions.length > 0" items.bind="topMenuActions"></dropdown-menu>
          <a href="${w6.url.play}/${path}" if.bind="path">
            <span class="imagecontent imageholder" back-img.bind="defaultBackUrl">
            <span class="imageholder" back-img.bind="defaultAssetUrl">
              <span class="imageholder" back-img.bind="image"></span>
            </span>
            </span>
          </a>
          <span if.bind="!path">
            <span class="imagecontent imageholder" back-img.bind="defaultBackUrl">
            <span class="imageholder" back-img.bind="defaultAssetUrl">
              <span class="imageholder" back-img.bind="image"></span>
          </span>
          </span>
          </span>
        </div>

        <div class="info">
          <div class="tiny">
            <div class="pull-right" if.bind="updatedAt">
              <time-ago time.bind="updatedAt" itemprop="dateModified"></time-ago>
            </div>
            <div>
              <span title="This content was made for ${gameName}">${gameName}
              <span class="${icon} icon"></span> ${model.type}</span>
            </div>
            <div class="clearfix"></div>
          </div>

          <div class="title">
            <!-- <div class="alternative-game" if.bind="!isForActiveGame"
                   title="This content was made for ARMA 2">
                <img src="${w6.url.cdn}/img/play.withSIX/games/Arma-2/arma2-blck.png" />
              </div> -->
            <span if.bind="scopeIcon" class="icon ${scopeIcon}"></span>
            <a if.bind="path" href="${w6.url.play}/${path}">${model.name}</a>
            <span if.bind="!path">${model.name}</span>
          </div>

          <div class="tiny">
            <div>
              <div class="pull-right">
                <a if.bind="model.authorSlug" href="${w6.url.connectSsl}/u/${model.authorSlug}">${model.author}</a>
                <span if.bind="!model.authorSlug">${model.author}</span>
              </div>
              <div>
                <span class="small">v${versionInfo}</span>
              </div>
              <div class="clearfix"></div>
            </div>
            <div class="followers small" if.bind="installs != null">${installs | amount } ${model.type == 'collection' ? 'subscribers' : 'installs'}</div>
            <div class="additional-info small">${model.additionalInfo}</div>
          </div>
        </div>
        <div class="clearfix"></div>
      </conditional-title>
    </div>

    <div class="bottom-bar content-state-c-bgd content-state-c-bgd-drkb details-overlay-footer">
      <!--
      <button class="col-sm-6 details-overlay-footer-state" ng-click="directDownload(item);">
          <span class="content-state-icon"></span><span class="content-state-text"></span>
          <button ng-if="isActive(model)" ng-click="abort(model)">Cancel</button>
      </button>
      <div ng-if="w6.enableBasket" class="col-sm-6 details-overlay-footer-localstate">
          <span class="pull-right" style="display:none;">Installed {{::item.version && item.version[0] != 'v' ? 'v' + item.version : item.version}}</span>
      </div>
     -->
      <action-bar class="pull-left" items.bind="bottomActions"></action-bar>
      <dropdown-menu class="pull-left new-style share-caret hide-until-open" icon="caret" if.bind="bottomMenuActions && bottomMenuActions.length > 0" items.bind="bottomMenuActions"></dropdown-menu>
    </div>
  </div>
</template>
